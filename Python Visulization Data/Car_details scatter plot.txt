import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# 📥 Διαβάζουμε το CSV
file_path = r"C:\Users\agkap\Desktop\Car_details.csv"
df = pd.read_csv(file_path)

# 👀 Προεπισκόπηση των πρώτων γραμμών
print("🔹 Πρώτες 5 γραμμές:\n", df.head())

# 🧹 Καθαρισμός: Αντικατάσταση μη αριθμητικών τιμών (π.χ. '?') με NaN
df['horsepower'] = df['horsepower'].replace('?', np.nan)

# Μετατροπή horsepower σε numeric και NaN σε μέση τιμή
df['horsepower'] = pd.to_numeric(df['horsepower'], errors='coerce')
df['horsepower'].fillna(df['horsepower'].mean(), inplace=True)

# 📊 Βασικά Στατιστικά
print("\n🔹 Στατιστικά Περιγραφικά:\n", df.describe())

# ✅ Ελέγχουμε αν υπάρχουν ακόμα κενά
print("\n🔹 Κενές τιμές ανά στήλη:\n", df.isnull().sum())

# ✅ Scatter plot: Weight vs MPG με legend τους Cylinders
plt.figure(figsize=(10, 6))
sns.scatterplot(x='weight', y='mpg', hue='cylinders', palette='Set1', data=df)
plt.title('Weight vs. MPG (χρωματισμός ανά Cylinders)')
plt.xlabel('Weight')
plt.ylabel('Miles per Gallon (MPG)')
plt.legend(title='Cylinders')
plt.grid(True)
plt.tight_layout()
plt.show()